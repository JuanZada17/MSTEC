"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6930],{66712:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(828),a=n(85893),i=n(25675),r=n.n(i),o=n(86067),l=n(3732),c=n(43714);function d(e){var t=e.className,n=e.trackEvent,i=void 0===n||n,d=e.onAction,u=e.showLink,m=void 0===u||u,x=(0,s.Z)((0,o.Z)("layout.paywall"),2),p=(x[0],x[1]),f=(0,c.Z)().track;return(0,a.jsxs)("div",{className:(0,l.AK)("flex flex-col md:flex-row md:items-center gap-5 rounded-lg py-4 px-5",t),children:[(0,a.jsx)("div",{className:"flex-shrink-0 relative w-14 h-14 -mb-3 -mx-0.5",children:(0,a.jsx)(r(),{src:(0,l.sd)("website-builder/domain.png"),alt:"Upgrade",layout:"fill",objectFit:"cover"})}),(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("label",{className:"text-body md:text-sm font-semibold text-gray-700 mb-1",children:"Upgrade and get a professional domain"}),(0,a.jsx)("p",{className:"text-body md:text-sm text-gray-500",children:"Level up your business with a custom domain, automated SEO, analytics, and more!"}),m&&(0,a.jsx)("button",{className:"link md:text-sm mt-2",onClick:function(){i&&f("account:paywall-click",{context:"domain_cta"}),"function"===typeof d?d():p("domain_cta")},children:"Get Domain \u2192"})]})]})}},46930:function(e,t,n){n.d(t,{P:function(){return w}});var s,a=n(47568),i=n(97582),r=n(85893),o=n(11355),l=n(69737),c=n(67294),d=n(51523),u=n(33299),m=n(41664),x=n.n(m),p=n(91957),f=n(33347),h=n(52077),v=n(3732),b=n(95350),y=n(66712),g=n(43714);function w(e){var t,n,m,w,j,N,k=e.preview,Z=e.status,_=e.previewToken,C=e.showAlert,T=e.open,F=e.setOpen,E=e.onPublish,I=e.onPreview,A=e.setOpenPaywall,S=(0,c.useState)(!0),L=S[0],K=S[1],P=(0,c.useState)(null),R=P[0],V=P[1],W=(0,c.useState)(!1),z=W[0],O=W[1],U=(0,c.useState)(""),D=U[0],G=U[1],H=(0,c.useRef)(null),M=(0,c.useRef)(null),X=(0,c.useRef)(null),Y=(0,f.Z)(),q=Y.get,B=Y.post,J=(0,d.Z)(D),Q=J.copied,$=J.copy,ee=J.reset,te=(0,g.Z)().track,ne=(0,u.useSession)().data,se=k?"private"===Z?"Preview":"View":"Upgrade to publish your",ae=function(){var e=(0,a.Z)((function(){var e,t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return O(!0),[4,q("/website/get-subdomain-details")];case 1:return(null===(e=n.sent())||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)&&(t=e.content.subdomain,V(t),G("https://".concat(t).concat((0,v.lz)()).concat("private"===Z?"?pt=".concat(_):""))),O(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,a.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return O(!0),[4,q("/website/verify-subdomain",{subdomain:R})];case 1:return(e=t.sent())&&!0===e.status&&!0===e.content?K(!0):K(!1),O(!1),[2,e.content]}}))}));return function(){return e.apply(this,arguments)}}(),re=function(){var e=(0,a.Z)((function(){var e,t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return O(!0),[4,B("/website/save-subdomain",{subdomain:R})];case 1:return(null===(e=n.sent())||void 0===e?void 0:e.status)?[4,B("/website/toggle-status",{status:"public"})]:[3,5];case 2:return(t=n.sent())&&t.status?[4,E()]:[3,4];case 3:n.sent(),F(!1),C&&b.Z.success("Website is live!"),n.label=4;case 4:return[3,6];case 5:b.Z.error(e.message),n.label=6;case 6:return O(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,a.Z)((function(){return(0,i.__generator)(this,(function(e){return clearTimeout(s),s=setTimeout((0,a.Z)((function(){return(0,i.__generator)(this,(function(e){return[2,ie()]}))})),500),[2]}))}));return function(){return e.apply(this,arguments)}}(),le=function(){te("account:paywall-click",{context:"".concat(k?"preview":"publish","_flow")}),A("".concat(k?"preview":"publish","_flow")),F(!1)},ce=function(){var e=(0,a.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return k?(I(),F(!1),[3,3]):[3,1];case 1:return[4,re()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){var e=setTimeout((function(){ee()}),2e3);return function(){clearTimeout(e)}}),[Q]),(0,c.useEffect)((function(){T&&ae()}),[T]),(0,r.jsx)(o.u.Root,{show:T,as:c.Fragment,children:(0,r.jsx)(l.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",initialFocus:H,onClose:function(){return F(!1)},children:(0,r.jsxs)("div",{className:"flex items-end lg:items-center justify-center h-full lg:pt-4 lg:px-4 lg:pb-20 text-center",style:{maxHeight:"-webkit-fill-available"},children:[(0,r.jsx)(o.u.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(l.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,r.jsx)("span",{className:"hidden md:inline-block md:align-middle md:h-screen","aria-hidden":"true",children:"\u200b"}),(0,r.jsx)(o.u.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,r.jsxs)("div",{className:"inline-block align-bottom w-full bg-white rounded-t-lg md:rounded-lg text-left overflow-visible shadow-xl transform transition-all md:my-8 md:align-middle md:max-w-lg",children:[(0,r.jsxs)("div",{className:"flex items-center py-4 px-5 border-b border-gray-200",children:[(0,r.jsxs)(l.V.Title,{className:"font-bold text-gray-900",children:[se," site"]}),(0,r.jsx)("button",{type:"button",className:"bg-white rounded-md text-gray-600 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ml-auto",onClick:function(){return F(!1)},tabIndex:-1,children:(0,r.jsx)(p.Z,{icon:"XMarkIcon",from:"heroicons",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,r.jsxs)("div",{ref:H,className:"p-4 md:p-6",children:[(0,r.jsx)("label",{className:"font-medium text-gray-500 mb-2",children:"Website preview address"}),(0,r.jsxs)("div",{children:[k?(0,r.jsxs)("div",{className:(0,v.AK)("group relative flex items-center gap-2 border rounded-full py-3 px-4 hover:border-indigo-600 overflow-hidden cursor-pointer transition-all",Q&&"!border-green-500",z&&"opacity-80 pointer-events-none"),onClick:function(){return $()},children:[(0,r.jsx)(p.Z,{icon:"LockClosedIcon",from:"heroicons",className:"text-gray-500 h-3 w-3"}),(0,r.jsxs)("div",{className:"flex-1 font-medium text-body md:text-sm truncate",children:[(0,r.jsx)("span",{children:R}),(0,r.jsx)("span",{className:"text-gray-400",children:(0,v.lz)()})]}),(0,r.jsxs)("div",{className:(0,v.AK)("absolute right-0 flex items-center py-3 px-4 bg-white text-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity",Q&&"!opacity-100 !text-green-500"),children:[(0,r.jsx)(p.Z,{icon:Q?"CheckIcon":"DocumentDuplicateSolidIcon",className:"w-5 h-5"}),Q&&(0,r.jsx)("span",{children:"Copied"})]})]}):(0,r.jsxs)("label",{className:"relative flex items-center gap-2 border rounded-full py-3 px-4 overflow-hidden",style:{paddingRight:(null===X||void 0===X||null===(t=X.current)||void 0===t?void 0:t.offsetWidth)+16||16},children:[(0,r.jsx)(p.Z,{icon:"LockClosedIcon",from:"heroicons",className:"text-gray-500 h-3 w-3"}),(0,r.jsx)("input",{ref:M,className:"w-full border-0 p-0 font-medium text-body md:text-sm outline-none placeholder-gray-400",value:R,onKeyUp:function(){return oe()},onChange:function(e){return V((0,v.nv)(e.target.value))}}),(0,r.jsxs)("div",{className:"absolute inset-0 flex items-center py-3 pl-9 pr-4 font-medium text-body md:text-sm pointer-events-none",children:[(0,r.jsx)("div",{className:"opacity-0",style:{maxWidth:(null===M||void 0===M||null===(n=M.current)||void 0===n?void 0:n.offsetWidth)||"100%"},children:R}),(0,r.jsx)("div",{ref:X,className:"text-gray-400",children:(0,v.lz)()})]}),(0,r.jsx)(x(),{href:D,children:(0,r.jsx)("a",{target:"_blank",className:(0,v.AK)("absolute right-0 flex items-center py-3 px-4 bg-white text-indigo-600 cursor-pointer transition-opacity hover:text-indigo-700"),children:(0,r.jsx)(p.Z,{icon:"ExternalLinkIcon",className:"w-5 h-5"})})})]}),!z&&!R&&(0,r.jsx)("p",{className:"text-body md:text-sm text-red-500 mt-2",children:"You must provide a domain name"}),R&&!L&&(0,r.jsx)("p",{className:"text-body md:text-sm text-red-500 mt-2",children:"This domain is being used, please choose another domain."})]}),(0,r.jsx)(y.Z,{className:"bg-gray-50 mt-6",trackEvent:!1,onAction:le,showLink:!1})]}),(0,r.jsxs)("div",{className:"flex flex-col-reverse md:flex-row md:justify-end gap-3 p-4 lg:px-6 border-t border-gray-200",children:[(0,r.jsx)(h.Z,{className:(null===ne||void 0===ne||null===(m=ne.user)||void 0===m||null===(w=m.plan)||void 0===w?void 0:w.level)>0||k?"light":"primary",onClick:le,children:"View plans"}),((null===ne||void 0===ne||null===(j=ne.user)||void 0===j||null===(N=j.plan)||void 0===N?void 0:N.level)>0||k)&&(0,r.jsx)(h.Z,{className:"primary",tabIndex:1,onClick:ce,disabled:z||!R||!L,loading:z,children:se})]})]})})]})})})}}}]);